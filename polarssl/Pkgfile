# Description: PolarSSL - Straightforward, Secure Communication
# URL: https://polarssl.org/
# Maintainer: Leo Unglaub, leo at leo-unglaub dot net
# Developer: Paul Bakker, p.j.bakker at offspark dot com
# Depends on: cmake

name=polarssl
version=1.3.9
release=1
source=(https://polarssl.org/download/$name-$version-gpl.tgz)

build ()
{
	# go into the source directory
	cd $SRC/$name-$version






	# it's optional, but i prefer to build in a seperate directory
	mkdir $SRC/$name-$version/build
	cd $SRC/$name-$version/build


	# start building PolarSSL
	cmake \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_INSTALL_PREFIX:PATH=/usr \
		..

	make
	make DESTDIR=$PKG install


	# prefix all executables with "polarssl_"
	cd $PKG/usr/bin
	for exe in *;
	do
		mv $exe "polarssl_$exe";
	done


	# get rid of some things we don't need
	rm $PKG/usr/bin/polarssl_{hello,md5sum,sha1sum}
}
